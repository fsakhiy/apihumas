<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password</title>
</head>
<body>
    <H1>Reset Password</H1>
    <form action="/resetpassword" method="post">
        <label for="password">Enter New Password</label>
        <input type="password" name="password" id="password">
        <label for="confirm">Confirm New Password</label>
        <input type="password" name="passwordconfirmation" id="confirm">
        
    <script>
        function getParams() {
            var idx = document.URL.indexOf('?');
            var params = new Array();
            if (idx != -1) {
                var pairs = document.URL.substring(idx + 1, document.URL.length).split('&');
                for (var i = 0; i < pairs.length; i++) {
                    nameVal = pairs[i].split('=');
                    params[nameVal[0]] = nameVal[1];
                }
            }
            return params;
        }

        let param = getParams()
        let token = unescape(param["token"])
        let pass = unescape(param["password"])
        document.write(`<input type="hidden" name="token" value="${token}">`)
        if(pass == "wrong") {
            document.write(`<p><b>Your password does not match</b></p>`)
        }
    </script>
    <button type="submit">Reset Password</button>
</form>
</body>
</html>